/**
 * Created by syariefa on 2/16/16.
 */
tinymce.PluginManager.add('lk', function(editor, url) {
    /* Add a button that opens a window
	editor.addButton('example', {
		text: 'My button',
		icon: false,
		onclick: function() {
			// Open window
			editor.windowManager.open({
				title: 'Example plugin',
				body: [
					{type: 'textbox', name: 'title', label: 'Title'}
				],
				onsubmit: function(e) {
					// Insert content when the window form is submitted
					editor.insertContent('Title: ' + e.data.title);
				}
			});
		}
	});*/

	// Adds a menu item to the tools menu
	var url_struktur_peran = '/perek_tugas/bantu17/data_struktur/';
	editor.addMenuItem('lk', {
		text: 'Template LK',
		context: 'insert',
		onclick: function() {
			// Open window with a specific url
            $.get(url_struktur_peran+$("span#da_nmr").attr('data-value'), function(nama_struktur){
                var tgl;
                var selector_tgl = $("span#data_tanggal");

                if(selector_tgl.attr('data-value') == '')
                {
                    tgl = '';
                }

                else
                {
                    tgl = 'Tanggal '+ selector_tgl.attr('data-value');
                }

                var a = '<p>Menindaklanjuti Instruksi '+$("span#data_referensi").attr('data-value')+' '+tgl+',</p>';

                tinymce.activeEditor.execCommand('mceInsertContent', false, a);
            });
		}
	});
});
